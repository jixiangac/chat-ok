## MODIFIED Requirements

### Requirement: 统一设置面板入口
系统 SHALL 提供一个统一的设置面板入口，用户可以通过点击设置图标打开全屏设置面板，使用整屏横移动画效果。

#### Scenario: 打开设置面板
- **WHEN** 用户点击设置图标
- **THEN** 系统应当使用整屏横移动画从右侧滑入设置面板
- **AND** 设置面板应当全屏覆盖（不使用遮罩层）
- **AND** 动画时长应当为 400ms，使用 ease-out 缓动函数
- **AND** 弹窗应当显示设置主页面
- **AND** 左上角应当显示返回按钮

#### Scenario: 关闭设置面板
- **WHEN** 用户点击返回按钮
- **THEN** 系统应当使用整屏横移动画向右滑出关闭设置面板
- **AND** 返回到之前的页面状态

#### Scenario: 手势返回关闭设置面板
- **WHEN** 用户从屏幕左边缘（< 50px）开始向右滑动
- **AND** 滑动距离超过阈值（100px）
- **THEN** 系统应当触发返回操作
- **AND** 使用整屏横移动画向右滑出关闭设置面板

### Requirement: 页面栈导航系统
系统 SHALL 实现页面栈管理，支持在同一弹窗内进行多级页面导航，使用 iOS 风格的卡片堆叠动画效果。

#### Scenario: 进入子页面
- **WHEN** 用户点击可导航的列表项
- **THEN** 系统应当在当前弹窗内切换到对应的子页面
- **AND** 应当显示 iOS 风格的卡片堆叠动画：
  - 当前页面缩小到 95% 并向左偏移 5%
  - 新页面从右侧滑入
- **AND** 动画时长应当为 400ms，使用 ease-out 缓动函数
- **AND** 子页面应当显示返回按钮

#### Scenario: 返回上一页
- **WHEN** 用户点击返回按钮
- **THEN** 系统应当返回到上一个页面
- **AND** 应当显示反向的卡片堆叠动画：
  - 当前页面向右滑出
  - 上一页面从缩小状态恢复到正常大小
- **AND** 如果已经在主页面，返回按钮应当触发关闭设置面板

#### Scenario: 手势返回上一页
- **WHEN** 用户在子页面从屏幕左边缘（< 50px）开始向右滑动
- **AND** 滑动距离超过阈值（100px）
- **THEN** 系统应当触发返回操作
- **AND** 返回到上一个页面

### Requirement: 设置列表项入场动画
设置主页面的列表项 SHALL 使用翻书效果的入场动画。

#### Scenario: 列表项翻书动画
- **WHEN** 设置主页面加载完成
- **THEN** 每个列表项应当使用 flipIn 动画入场
- **AND** 动画效果为 rotateX 从 -90deg 到 0deg
- **AND** 动画时长应当为 400ms，使用 ease-out 缓动函数
- **AND** 每个列表项应当依次延迟 60ms 入场

#### Scenario: 子页面列表项动画
- **WHEN** 子页面加载完成
- **THEN** 子页面内的列表项也应当使用相同的翻书动画入场

## ADDED Requirements

### Requirement: 标签设置底部新增按钮
标签设置页面 SHALL 将新增按钮固定在底部，点击后弹出底部弹窗创建新标签。

#### Scenario: 显示底部新增按钮
- **WHEN** 用户进入标签设置页面
- **THEN** 页面底部应当固定显示"新增"按钮
- **AND** 按钮应当使用 SafeArea 适配底部安全区域

#### Scenario: 点击新增按钮
- **WHEN** 用户点击底部"新增"按钮
- **THEN** 系统应当从底部弹出创建标签的弹窗（使用 antd-mobile Popup）
- **AND** 弹窗内容应当包含现有的标签创建表单（名称输入、图标选择）

#### Scenario: 创建标签
- **WHEN** 用户在弹窗中填写标签信息并点击确认
- **THEN** 系统应当创建新标签并添加到列表
- **AND** 关闭底部弹窗

### Requirement: 主题设置保存机制
主题设置页面 SHALL 添加底部固定保存按钮，修改后需点击保存才全局生效。

#### Scenario: 显示底部保存按钮
- **WHEN** 用户进入主题设置页面
- **THEN** 页面底部应当固定显示"保存"按钮
- **AND** 按钮应当使用 SafeArea 适配底部安全区域

#### Scenario: 预览主题效果
- **WHEN** 用户在主题设置页面切换主题选项
- **THEN** 系统应当在当前页面预览主题效果
- **AND** 预览效果不应当立即全局生效

#### Scenario: 保存主题设置
- **WHEN** 用户点击底部"保存"按钮
- **THEN** 系统应当将当前选择的主题设置保存并全局生效
- **AND** 显示保存成功提示

#### Scenario: 放弃主题修改
- **WHEN** 用户修改了主题设置但未点击保存
- **AND** 用户点击返回按钮或使用手势返回
- **THEN** 系统应当直接放弃未保存的修改
- **AND** 恢复到之前的主题设置
- **AND** 不显示确认弹窗
