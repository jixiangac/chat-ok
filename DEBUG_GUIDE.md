# VS Code 调试指南

## 调试配置说明

我已经为你的 ice.js 项目创建了完整的 VS Code 调试配置，包含以下文件：

### 1. `.vscode/launch.json` - 调试启动配置
- **启动开发服务器**: 直接在 VS Code 中启动 ice 开发服务器
- **调试 Chrome 浏览器**: 启动 Chrome 并连接调试器
- **附加到 Chrome**: 附加到已运行的 Chrome 实例
- **启动应用并调试**: 组合配置，同时启动服务器和浏览器调试

### 2. `.vscode/settings.json` - 编辑器设置
- 启用 TypeScript 自动导入
- 配置调试相关设置
- 优化 React/TSX 文件支持

### 3. `.vscode/tasks.json` - 任务配置
- 启动开发服务器任务
- 构建项目任务
- ESLint 检查任务

## 如何使用调试功能

### 重要：调试前准备
1. 确保开发服务器已启动：`npm start`
2. 等待编译完成，看到 "compiled successfully" 消息

### 启动调试
1. 按 `Cmd+Shift+D` 打开调试面板
2. 选择 **"调试 Chrome (推荐)"** 配置
3. 点击绿色播放按钮开始调试
4. 会自动打开新的 Chrome 窗口

### 如果断点不生效
1. 确保在正确的文件中设置断点（.tsx 或 .ts 文件）
2. 刷新浏览器页面触发代码执行
3. 检查 VS Code 底部状态栏是否显示"已连接到调试器"

### 设置断点
1. 在代码行号左侧点击设置断点（红色圆点）
2. 或者按 `F9` 在当前行设置断点
3. 支持在 `.tsx`、`.ts` 文件中设置断点

### 调试功能
- **单步执行**: `F10`
- **步入函数**: `F11`
- **步出函数**: `Shift+F11`
- **继续执行**: `F5`
- **停止调试**: `Shift+F5`

### 调试 React 组件
1. 在组件代码中设置断点
2. 使用 "启动应用并调试" 配置
3. 在浏览器中触发相应的组件渲染或事件
4. VS Code 会自动停在断点处

### 查看变量和状态
- **变量面板**: 查看当前作用域的所有变量
- **监视面板**: 添加自定义表达式监视
- **调用堆栈**: 查看函数调用链
- **控制台**: 执行 JavaScript 表达式

## 常见问题

### 1. 断点不生效
- 确保源码映射（source map）正确
- 检查文件路径是否匹配
- 重启调试会话

### 2. 无法连接到浏览器
- 确保 Chrome 已安装
- 检查端口 3000 是否被占用
- 尝试手动启动开发服务器后使用 "附加到 Chrome" 配置

### 3. TypeScript 调试问题
- 确保 `tsconfig.json` 中启用了 source map
- 检查 TypeScript 编译是否成功

## 推荐的调试工作流

1. **开发阶段**: 使用 "启动应用并调试" 进行完整调试
2. **问题排查**: 在具体代码位置设置断点，使用单步执行
3. **性能分析**: 使用 Chrome DevTools 的 Performance 面板
4. **网络请求**: 使用 Chrome DevTools 的 Network 面板

现在你可以开始在 VS Code 中愉快地调试你的 ice.js 项目了！
