# Design: ç»Ÿä¸€å½’æ¡£é¡µé¢ä¸çµç‰ç•Œé¢é£æ ¼

## Overview

æœ¬è®¾è®¡æ–‡æ¡£è¯¦ç»†æè¿°å½’æ¡£é¡µé¢å’Œçµç‰æ˜ç»†ç•Œé¢çš„ UI ç»Ÿä¸€æ–¹æ¡ˆï¼Œç¡®ä¿ä¸ç°æœ‰è®¾ç½®å­é¡µé¢é£æ ¼ä¿æŒä¸€è‡´ã€‚

---

## Part 1: å½’æ¡£é¡µé¢é‡æ„

### 1.1 å…¥å£å˜æ›´

**å½“å‰çŠ¶æ€**ï¼š
- ä¸»é¡µé¢é¡¶éƒ¨å³ä¾§æœ‰ Archive å›¾æ ‡æŒ‰é’®
- ç‚¹å‡»åå…¨å±å±•ç¤ºå½’æ¡£é¡µé¢

**ç›®æ ‡çŠ¶æ€**ï¼š
- ç§»é™¤ä¸»é¡µé¢é¡¶éƒ¨çš„ Archive å›¾æ ‡æŒ‰é’®
- åœ¨è®¾ç½®é¢æ¿ > å¼€å‘è€…åˆ†ç»„ æ·»åŠ "å½’æ¡£ä»»åŠ¡"å…¥å£
- ç‚¹å‡»åä½œä¸ºè®¾ç½®å­é¡µé¢å±•ç¤º

**è®¾ç½®å…¥å£é…ç½®**ï¼š
```tsx
<SettingsListItem
  icon={<Archive size={18} />}
  title="å½’æ¡£å†å²"
  description="æŸ¥çœ‹å·²å½’æ¡£çš„ä»»åŠ¡"
  animated
  animationIndex={animationIndex++}
  onClick={() => onNavigate('archive', 'å½’æ¡£å†å²')}
/>
```

### 1.2 é¡µé¢å¸ƒå±€

é‡‡ç”¨ SubPageLayout ç»„ä»¶ï¼Œç»“æ„å¦‚ä¸‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† (è¿”å›æŒ‰é’®)                        â”‚
â”‚                                     â”‚
â”‚         [å¤´å›¾åŒºåŸŸ]                   â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å½’æ¡£ä»»åŠ¡                            â”‚
â”‚  æŸ¥çœ‹å·²å®Œæˆå’Œæœªå®Œæˆçš„å½’æ¡£ä»»åŠ¡         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ å…¨éƒ¨ â”‚ä¸»çº¿ â”‚æ”¯çº¿  â”‚  â† Tab ç­›é€‰    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ å·²å®Œæˆ   â”‚ æœªå®Œæˆ  â”‚  â† çŠ¶æ€ç­›é€‰   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚         [å½’æ¡£ä»»åŠ¡åˆ—è¡¨]               â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.3 ç­›é€‰ Tab æ ·å¼

å‚è€ƒæ ‡ç­¾ç®¡ç†é¡µé¢çš„ Tab åˆ‡æ¢é£æ ¼ï¼š

```css
/* Tab å®¹å™¨ */
.filterTabs {
  display: flex;
  gap: 8px;
  padding: 12px 16px;
  background: rgba(55, 53, 47, 0.03);
  border-radius: 12px;
  margin-bottom: 12px;
}

/* å•ä¸ª Tab */
.filterTab {
  flex: 1;
  padding: 10px 16px;
  border-radius: 8px;
  border: none;
  background: transparent;
  font-size: 14px;
  color: rgba(55, 53, 47, 0.65);
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.filterTab.active {
  background: white;
  color: rgb(55, 53, 47);
  font-weight: 500;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}
```

### 1.4 å¤´å›¾é…ç½®

ä½¿ç”¨ç»Ÿä¸€çš„å½’æ¡£ä¸»é¢˜å¤´å›¾ï¼š

```tsx
const ARCHIVE_HEADER_IMAGE = 'https://img.alicdn.com/imgextra/xxx';  // å¾…å®šï¼Œå¯å¤ç”¨ç°æœ‰å¤´å›¾
const ARCHIVE_HEADER_BACKGROUND = 'linear-gradient(135deg, #E8E0D4 0%, #D4C8BC 100%)';
```

---

## Part 2: çµç‰æ˜ç»†ç•Œé¢é‡æ„

### 2.1 å…¥å£ä¿æŒä¸å˜

- çµç‰å›¾æ ‡ä»åœ¨ä¸»é¡µé¢é¡¶éƒ¨
- ç‚¹å‡»åä»å³ä¾§æ»‘å…¥å…¨å±é¡µé¢ï¼ˆä¸è®¾ç½®é¢æ¿åŠ¨ç”»ä¸€è‡´ï¼‰
- ä¸ç»è¿‡è®¾ç½®é¢æ¿ï¼Œç›´æ¥ç‹¬ç«‹å±•ç¤º

### 2.2 é¡µé¢å¸ƒå±€

é‡‡ç”¨ä¸è®¾ç½®å­é¡µé¢ç›¸åŒçš„å¸ƒå±€ç»“æ„ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† (è¿”å›æŒ‰é’®)                        â”‚
â”‚                                     â”‚
â”‚         [çµç‰ä¸»é¢˜å¤´å›¾]               â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  çµç‰æ˜ç»†                            â”‚
â”‚  æŸ¥çœ‹çµç‰æ”¶æ”¯è®°å½•                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  ğŸ’ 1234     å½“å‰ä½™é¢           â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚  â†‘ +5678    â†“ -4444            â”‚â”‚
â”‚  â”‚  ç´¯è®¡è·å¾—    ç´¯è®¡æ¶ˆè€—           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å˜åŠ¨è®°å½•                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ä»»åŠ¡æ‰“å¡              +20       â”‚â”‚
â”‚  â”‚ é˜…è¯»è‹±è¯­æ–‡ç«   01-24 10:30      â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ åˆ›å»ºä»»åŠ¡              -200      â”‚â”‚
â”‚  â”‚ æ–°å»ºä¸»çº¿ä»»åŠ¡  01-24 09:15      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 åŠ¨ç”»å®ç°

å¤ç”¨è®¾ç½®é¢æ¿çš„åŠ¨ç”»ç³»ç»Ÿï¼š

```tsx
// çµç‰é¡µé¢ä½œä¸ºç‹¬ç«‹å…¨å±å¼¹çª—
<SpiritJadePage
  visible={showJadeHistory}
  onClose={() => setShowJadeHistory(false)}
  balance={spiritJadeData.balance}
  totalEarned={spiritJadeData.totalEarned}
  totalSpent={spiritJadeData.totalSpent}
  pointsHistory={pointsHistory}
/>
```

é¡µé¢ç»„ä»¶å†…éƒ¨ä½¿ç”¨ createPortal æŒ‚è½½åˆ° bodyï¼Œå¹¶åº”ç”¨å³æ»‘è¿›å…¥åŠ¨ç”»ï¼š

```css
.jadePage {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background: white;
  z-index: 1100;
  transform: translateX(100%);
  transition: transform 0.4s ease-out;
}

.jadePage.visible {
  transform: translateX(0);
}

.jadePage.exiting {
  transform: translateX(100%);
  transition: transform 0.4s ease-in;
}
```

### 2.4 å¤´å›¾é…ç½®

ä½¿ç”¨çµç‰ä¸»é¢˜å¤´å›¾ï¼š

```tsx
const JADE_HEADER_IMAGE = 'https://img.alicdn.com/imgextra/xxx';  // å¾…å®š
const JADE_HEADER_BACKGROUND = 'linear-gradient(135deg, #F0E6D8 0%, #E8DCD0 100%)';
```

---

## Part 3: ç»„ä»¶å¤ç”¨ç­–ç•¥

### 3.1 SubPageLayout å¤ç”¨

ä¸¤ä¸ªé¡µé¢éƒ½å¤ç”¨ç°æœ‰çš„ `SubPageLayout` ç»„ä»¶ï¼š

```tsx
<SubPageLayout
  title="çµç‰æ˜ç»†"
  description="æŸ¥çœ‹çµç‰æ”¶æ”¯è®°å½•"
  headerImage={JADE_HEADER_IMAGE}
  headerBackground={JADE_HEADER_BACKGROUND}
  onBack={onClose}
>
  {/* é¡µé¢å†…å®¹ */}
</SubPageLayout>
```

### 3.2 åŠ¨ç”»ç³»ç»Ÿå¤ç”¨

å½’æ¡£é¡µé¢ä½œä¸ºè®¾ç½®å­é¡µé¢ï¼Œè‡ªåŠ¨ä½¿ç”¨è®¾ç½®é¢æ¿çš„é¡µé¢æ ˆåŠ¨ç”»ã€‚

çµç‰é¡µé¢ä½œä¸ºç‹¬ç«‹å…¨å±å¼¹çª—ï¼Œå¤ç”¨è®¾ç½®é¢æ¿çš„è¿›å…¥/é€€å‡ºåŠ¨ç”» CSSã€‚

### 3.3 æ‰‹åŠ¿è¿”å›

ä¸¤ä¸ªé¡µé¢éƒ½æ”¯æŒå‘å³æ»‘åŠ¨è¿”å›ï¼š
- å½’æ¡£é¡µé¢ï¼šä½¿ç”¨ `useSwipeBack` hook
- çµç‰é¡µé¢ï¼šåŒæ ·ä½¿ç”¨ `useSwipeBack` hook

---

## Part 4: æ–‡ä»¶ç»“æ„å˜æ›´

### 4.1 æ–°å¢æ–‡ä»¶

```
src/pages/dc/panels/settings/pages/
â”œâ”€â”€ ArchivePage/              # å½’æ¡£å­é¡µé¢ï¼ˆæ–°å¢ï¼‰
â”‚   â”œâ”€â”€ index.tsx
â”‚   â””â”€â”€ styles.module.css

src/pages/dc/viewmodel/
â”œâ”€â”€ SpiritJadePage/           # çµç‰å…¨å±é¡µé¢ï¼ˆæ–°å¢ï¼Œæ›¿ä»£ SpiritJadeHistoryPopupï¼‰
â”‚   â”œâ”€â”€ index.tsx
â”‚   â””â”€â”€ styles.module.css
```

### 4.2 ä¿®æ”¹æ–‡ä»¶

```
src/pages/dc/index.tsx                          # ç§»é™¤å½’æ¡£æŒ‰é’®ï¼Œä¿®æ”¹çµç‰ç‚¹å‡»
src/pages/dc/panels/settings/pages/index.ts     # å¯¼å‡º ArchivePage
src/pages/dc/panels/settings/pages/SettingsMainPage/index.tsx  # æ·»åŠ å½’æ¡£å…¥å£
src/pages/dc/panels/settings/UnifiedSettingsPanel/index.tsx    # æ·»åŠ å½’æ¡£è·¯ç”±
src/pages/dc/contexts/UIProvider.tsx            # å¯èƒ½éœ€è¦ç§»é™¤ showArchive çŠ¶æ€
```

### 4.3 å¯åˆ é™¤æ–‡ä»¶

```
src/pages/dc/components/SpiritJadeHistoryPopup/  # è¢« SpiritJadePage æ›¿ä»£
```

---

## Technical Decisions

### Decision 1: å½’æ¡£é¡µé¢ä½œä¸ºè®¾ç½®å­é¡µé¢

**é€‰æ‹©**: å½’æ¡£é¡µé¢æ•´åˆåˆ°è®¾ç½®é¢æ¿çš„é¡µé¢æ ˆä¸­

**ç†ç”±**:
- å¤ç”¨ç°æœ‰çš„é¡µé¢æ ˆç®¡ç†é€»è¾‘
- åŠ¨ç”»å’Œæ‰‹åŠ¿è¿”å›è‡ªåŠ¨å¯ç”¨
- å‡å°‘ç‹¬ç«‹å¼¹çª—çš„ç®¡ç†å¤æ‚åº¦

### Decision 2: çµç‰é¡µé¢ä½œä¸ºç‹¬ç«‹å…¨å±å¼¹çª—

**é€‰æ‹©**: çµç‰é¡µé¢ç‹¬ç«‹äºè®¾ç½®é¢æ¿ï¼Œä»ä¸»é¡µé¢ç›´æ¥æ‰“å¼€

**ç†ç”±**:
- ä¿æŒçµç‰å…¥å£åœ¨åŸä½ï¼ˆé¡¶éƒ¨ï¼‰ï¼Œç”¨æˆ·æ“ä½œè·¯å¾„ä¸å˜
- çµç‰æŸ¥çœ‹æ˜¯ç›¸å¯¹é«˜é¢‘æ“ä½œï¼Œä¸éœ€è¦ç»•é“è®¾ç½®é¢æ¿
- è§†è§‰é£æ ¼ä¸è®¾ç½®å­é¡µé¢ä¸€è‡´å³å¯

### Decision 3: Tab ç­›é€‰é£æ ¼

**é€‰æ‹©**: é‡‡ç”¨æ ‡ç­¾ç®¡ç†çš„ Tab åˆ‡æ¢é£æ ¼ï¼Œåœ†è§’æŒ‰é’® + ç™½è‰²èƒŒæ™¯é«˜äº®

**ç†ç”±**:
- ä¸æ ‡ç­¾ç®¡ç†é¡µé¢é£æ ¼ä¸€è‡´
- æ¯”åŸæœ‰çš„èƒ¶å›ŠæŒ‰é’®æ›´ç°ä»£
- é€‚åˆç§»åŠ¨ç«¯è§¦æ§æ“ä½œ
